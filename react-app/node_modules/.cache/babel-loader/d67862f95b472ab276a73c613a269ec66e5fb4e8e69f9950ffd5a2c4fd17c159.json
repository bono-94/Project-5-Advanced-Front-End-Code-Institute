{"ast":null,"code":"var _jsxFileName = \"/workspace/Project-5-Advanced-Front-End-Code-Institute/react-app/src/contexts/ProfileDataContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport { axiosReq, axiosRes } from \"../api/axiosDefaults\";\nimport { useCurrentUser } from \"../contexts/CurrentUserContext\";\nimport { followHelper, unfollowHelper } from \"../utils/utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProfileDataContext = /*#__PURE__*/createContext();\nconst SetProfileDataContext = /*#__PURE__*/createContext();\nexport const useProfileData = () => {\n  _s();\n  return useContext(ProfileDataContext);\n};\n_s(useProfileData, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const useSetProfileData = () => {\n  _s2();\n  return useContext(SetProfileDataContext);\n};\n_s2(useSetProfileData, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const ProfileDataProvider = ({\n  children\n}) => {\n  _s3();\n  const [profileData, setProfileData] = useState({\n    // we will use the pageProfile later!\n    pageProfile: {\n      results: []\n    },\n    popularProfiles: {\n      results: []\n    }\n  });\n  const currentUser = useCurrentUser();\n  const handleFollow = async clickedProfile => {\n    try {\n      const {\n        data\n      } = await axiosRes.post(\"/followers/\", {\n        followed: clickedProfile.id\n      });\n      setProfileData(prevState => ({\n        ...prevState,\n        pageProfile: {\n          results: prevState.pageProfile.results.map(profile => followHelper(profile, clickedProfile, data.id))\n        },\n        popularProfiles: {\n          ...prevState.popularProfiles,\n          results: prevState.popularProfiles.results.map(profile => followHelper(profile, clickedProfile, data.id))\n        }\n      }));\n    } catch (err) {\n      // console.log(err);\n    }\n  };\n  const handleUnfollow = async clickedProfile => {\n    try {\n      await axiosRes.delete(`/followers/${clickedProfile.following_id}/`);\n      setProfileData(prevState => ({\n        ...prevState,\n        pageProfile: {\n          results: prevState.pageProfile.results.map(profile => unfollowHelper(profile, clickedProfile))\n        },\n        popularProfiles: {\n          ...prevState.popularProfiles,\n          results: prevState.popularProfiles.results.map(profile => unfollowHelper(profile, clickedProfile))\n        }\n      }));\n    } catch (err) {\n      // console.log(err);\n    }\n  };\n  useEffect(() => {\n    const handleMount = async () => {\n      try {\n        const {\n          data\n        } = await axiosReq.get(\"/profiles/?ordering=-followers_count\");\n        setProfileData(prevState => ({\n          ...prevState,\n          popularProfiles: data\n        }));\n      } catch (err) {\n        // console.log(err);\n      }\n    };\n    handleMount();\n  }, [currentUser]);\n  return /*#__PURE__*/_jsxDEV(ProfileDataContext.Provider, {\n    value: profileData,\n    children: /*#__PURE__*/_jsxDEV(SetProfileDataContext.Provider, {\n      value: {\n        setProfileData,\n        handleFollow,\n        handleUnfollow\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n_s3(ProfileDataProvider, \"AuKRLCrNipvDneuvyWR5bKf6nz0=\", false, function () {\n  return [useCurrentUser];\n});\n_c = ProfileDataProvider;\nvar _c;\n$RefreshReg$(_c, \"ProfileDataProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useState","axiosReq","axiosRes","useCurrentUser","followHelper","unfollowHelper","jsxDEV","_jsxDEV","ProfileDataContext","SetProfileDataContext","useProfileData","_s","useSetProfileData","_s2","ProfileDataProvider","children","_s3","profileData","setProfileData","pageProfile","results","popularProfiles","currentUser","handleFollow","clickedProfile","data","post","followed","id","prevState","map","profile","err","handleUnfollow","delete","following_id","handleMount","get","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/workspace/Project-5-Advanced-Front-End-Code-Institute/react-app/src/contexts/ProfileDataContext.js"],"sourcesContent":["import { createContext, useContext, useEffect, useState } from \"react\";\nimport { axiosReq, axiosRes } from \"../api/axiosDefaults\";\nimport { useCurrentUser } from \"../contexts/CurrentUserContext\";\nimport { followHelper, unfollowHelper } from \"../utils/utils\";\n\nconst ProfileDataContext = createContext();\nconst SetProfileDataContext = createContext();\n\nexport const useProfileData = () => useContext(ProfileDataContext);\nexport const useSetProfileData = () => useContext(SetProfileDataContext);\n\nexport const ProfileDataProvider = ({ children }) => {\n  const [profileData, setProfileData] = useState({\n    // we will use the pageProfile later!\n    pageProfile: { results: [] },\n    popularProfiles: { results: [] },\n  });\n\n  const currentUser = useCurrentUser();\n\n  const handleFollow = async (clickedProfile) => {\n    try {\n      const { data } = await axiosRes.post(\"/followers/\", {\n        followed: clickedProfile.id,\n      });\n\n      setProfileData((prevState) => ({\n        ...prevState,\n        pageProfile: {\n          results: prevState.pageProfile.results.map((profile) =>\n            followHelper(profile, clickedProfile, data.id)\n          ),\n        },\n        popularProfiles: {\n          ...prevState.popularProfiles,\n          results: prevState.popularProfiles.results.map((profile) =>\n            followHelper(profile, clickedProfile, data.id)\n          ),\n        },\n      }));\n    } catch (err) {\n      // console.log(err);\n    }\n  };\n\n  const handleUnfollow = async (clickedProfile) => {\n    try {\n      await axiosRes.delete(`/followers/${clickedProfile.following_id}/`);\n\n      setProfileData((prevState) => ({\n        ...prevState,\n        pageProfile: {\n          results: prevState.pageProfile.results.map((profile) =>\n            unfollowHelper(profile, clickedProfile)\n          ),\n        },\n        popularProfiles: {\n          ...prevState.popularProfiles,\n          results: prevState.popularProfiles.results.map((profile) =>\n            unfollowHelper(profile, clickedProfile)\n          ),\n        },\n      }));\n    } catch (err) {\n      // console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    const handleMount = async () => {\n      try {\n        const { data } = await axiosReq.get(\n          \"/profiles/?ordering=-followers_count\"\n        );\n        setProfileData((prevState) => ({\n          ...prevState,\n          popularProfiles: data,\n        }));\n      } catch (err) {\n        // console.log(err);\n      }\n    };\n\n    handleMount();\n  }, [currentUser]);\n\n  return (\n    <ProfileDataContext.Provider value={profileData}>\n      <SetProfileDataContext.Provider\n        value={{ setProfileData, handleFollow, handleUnfollow }}\n      >\n        {children}\n      </SetProfileDataContext.Provider>\n    </ProfileDataContext.Provider>\n  );\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}