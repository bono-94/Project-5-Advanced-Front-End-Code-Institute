{"ast":null,"code":"import jwtDecode from \"jwt-decode\";\nimport { axiosReq } from \"../api/axiosDefaults\";\nexport const fetchMoreData = async (resource, setResource) => {\n  try {\n    const {\n      data\n    } = await axiosReq.get(resource.next);\n    setResource(prevResource => ({\n      ...prevResource,\n      next: data.next,\n      results: data.results.reduce((acc, cur) => {\n        return acc.some(accResult => accResult.id === cur.id) ? acc : [...acc, cur];\n      }, prevResource.results)\n    }));\n  } catch (err) {}\n};\nexport const followHelper = (profile, clickedProfile, following_id) => {\n  return profile.id === clickedProfile.id ?\n  // This is the profile I clicked on,\n  // update its followers count and set its following id\n  {\n    ...profile,\n    followers_count: profile.followers_count + 1,\n    following_id\n  } : profile.is_owner ?\n  // This is the profile of the logged in user\n  // update its following count\n  {\n    ...profile,\n    following_count: profile.following_count + 1\n  } :\n  // this is not the profile the user clicked on or the profile\n  // the user owns, so just return it unchanged\n  profile;\n};\nexport const unfollowHelper = (profile, clickedProfile) => {\n  return profile.id === clickedProfile.id ?\n  // This is the profile I clicked on,\n  // update its followers count and set its following id\n  {\n    ...profile,\n    followers_count: profile.followers_count - 1,\n    following_id: null\n  } : profile.is_owner ?\n  // This is the profile of the logged in user\n  // update its following count\n  {\n    ...profile,\n    following_count: profile.following_count - 1\n  } :\n  // this is not the profile the user clicked on or the profile\n  // the user owns, so just return it unchanged\n  profile;\n};\nexport const setTokenTimestamp = data => {\n  const refreshTokenTimestamp = jwtDecode(data === null || data === void 0 ? void 0 : data.refresh_token).exp;\n  localStorage.setItem(\"refreshTokenTimestamp\", refreshTokenTimestamp);\n};\nexport const shouldRefreshToken = () => {\n  return !!localStorage.getItem(\"refreshTokenTimestamp\");\n};\nexport const removeTokenTimestamp = () => {\n  localStorage.removeItem(\"refreshTokenTimestamp\");\n};","map":{"version":3,"names":["jwtDecode","axiosReq","fetchMoreData","resource","setResource","data","get","next","prevResource","results","reduce","acc","cur","some","accResult","id","err","followHelper","profile","clickedProfile","following_id","followers_count","is_owner","following_count","unfollowHelper","setTokenTimestamp","refreshTokenTimestamp","refresh_token","exp","localStorage","setItem","shouldRefreshToken","getItem","removeTokenTimestamp","removeItem"],"sources":["/workspace/Project-5-Advanced-Front-End-Code-Institute/react-app/src/utils/utils.js"],"sourcesContent":["import jwtDecode from \"jwt-decode\";\nimport { axiosReq } from \"../api/axiosDefaults\";\n\nexport const fetchMoreData = async (resource, setResource) => {\n  try {\n    const { data } = await axiosReq.get(resource.next);\n    setResource((prevResource) => ({\n      ...prevResource,\n      next: data.next,\n      results: data.results.reduce((acc, cur) => {\n        return acc.some((accResult) => accResult.id === cur.id)\n          ? acc\n          : [...acc, cur];\n      }, prevResource.results),\n    }));\n  } catch (err) {}\n};\n\nexport const followHelper = (profile, clickedProfile, following_id) => {\n  return profile.id === clickedProfile.id\n    ? // This is the profile I clicked on,\n      // update its followers count and set its following id\n      {\n        ...profile,\n        followers_count: profile.followers_count + 1,\n        following_id,\n      }\n    : profile.is_owner\n    ? // This is the profile of the logged in user\n      // update its following count\n      { ...profile, following_count: profile.following_count + 1 }\n    : // this is not the profile the user clicked on or the profile\n      // the user owns, so just return it unchanged\n      profile;\n};\n\nexport const unfollowHelper = (profile, clickedProfile) => {\n  return profile.id === clickedProfile.id\n    ? // This is the profile I clicked on,\n      // update its followers count and set its following id\n      {\n        ...profile,\n        followers_count: profile.followers_count - 1,\n        following_id: null,\n      }\n    : profile.is_owner\n    ? // This is the profile of the logged in user\n      // update its following count\n      { ...profile, following_count: profile.following_count - 1 }\n    : // this is not the profile the user clicked on or the profile\n      // the user owns, so just return it unchanged\n      profile;\n};\n\nexport const setTokenTimestamp = (data) => {\n  const refreshTokenTimestamp = jwtDecode(data?.refresh_token).exp;\n  localStorage.setItem(\"refreshTokenTimestamp\", refreshTokenTimestamp);\n};\n\nexport const shouldRefreshToken = () => {\n  return !!localStorage.getItem(\"refreshTokenTimestamp\");\n};\n\nexport const removeTokenTimestamp = () => {\n  localStorage.removeItem(\"refreshTokenTimestamp\");\n};"],"mappings":"AAAA,OAAOA,SAAS,MAAM,YAAY;AAClC,SAASC,QAAQ,QAAQ,sBAAsB;AAE/C,OAAO,MAAMC,aAAa,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,WAAW,KAAK;EAC5D,IAAI;IACF,MAAM;MAAEC;IAAK,CAAC,GAAG,MAAMJ,QAAQ,CAACK,GAAG,CAACH,QAAQ,CAACI,IAAI,CAAC;IAClDH,WAAW,CAAEI,YAAY,KAAM;MAC7B,GAAGA,YAAY;MACfD,IAAI,EAAEF,IAAI,CAACE,IAAI;MACfE,OAAO,EAAEJ,IAAI,CAACI,OAAO,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAK;QACzC,OAAOD,GAAG,CAACE,IAAI,CAAEC,SAAS,IAAKA,SAAS,CAACC,EAAE,KAAKH,GAAG,CAACG,EAAE,CAAC,GACnDJ,GAAG,GACH,CAAC,GAAGA,GAAG,EAAEC,GAAG,CAAC;MACnB,CAAC,EAAEJ,YAAY,CAACC,OAAO;IACzB,CAAC,CAAC,CAAC;EACL,CAAC,CAAC,OAAOO,GAAG,EAAE,CAAC;AACjB,CAAC;AAED,OAAO,MAAMC,YAAY,GAAGA,CAACC,OAAO,EAAEC,cAAc,EAAEC,YAAY,KAAK;EACrE,OAAOF,OAAO,CAACH,EAAE,KAAKI,cAAc,CAACJ,EAAE;EACnC;EACA;EACA;IACE,GAAGG,OAAO;IACVG,eAAe,EAAEH,OAAO,CAACG,eAAe,GAAG,CAAC;IAC5CD;EACF,CAAC,GACDF,OAAO,CAACI,QAAQ;EAChB;EACA;EACA;IAAE,GAAGJ,OAAO;IAAEK,eAAe,EAAEL,OAAO,CAACK,eAAe,GAAG;EAAE,CAAC;EAC5D;EACA;EACAL,OAAO;AACb,CAAC;AAED,OAAO,MAAMM,cAAc,GAAGA,CAACN,OAAO,EAAEC,cAAc,KAAK;EACzD,OAAOD,OAAO,CAACH,EAAE,KAAKI,cAAc,CAACJ,EAAE;EACnC;EACA;EACA;IACE,GAAGG,OAAO;IACVG,eAAe,EAAEH,OAAO,CAACG,eAAe,GAAG,CAAC;IAC5CD,YAAY,EAAE;EAChB,CAAC,GACDF,OAAO,CAACI,QAAQ;EAChB;EACA;EACA;IAAE,GAAGJ,OAAO;IAAEK,eAAe,EAAEL,OAAO,CAACK,eAAe,GAAG;EAAE,CAAC;EAC5D;EACA;EACAL,OAAO;AACb,CAAC;AAED,OAAO,MAAMO,iBAAiB,GAAIpB,IAAI,IAAK;EACzC,MAAMqB,qBAAqB,GAAG1B,SAAS,CAACK,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEsB,aAAa,CAAC,CAACC,GAAG;EAChEC,YAAY,CAACC,OAAO,CAAC,uBAAuB,EAAEJ,qBAAqB,CAAC;AACtE,CAAC;AAED,OAAO,MAAMK,kBAAkB,GAAGA,CAAA,KAAM;EACtC,OAAO,CAAC,CAACF,YAAY,CAACG,OAAO,CAAC,uBAAuB,CAAC;AACxD,CAAC;AAED,OAAO,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;EACxCJ,YAAY,CAACK,UAAU,CAAC,uBAAuB,CAAC;AAClD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}